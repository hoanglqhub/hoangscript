local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui", 5)

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ExclusiveMenu"
screenGui.IgnoreGuiInset = true
screenGui.Enabled = true
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local function createStroke(parent, thickness, color, transparency)
    local stroke = Instance.new("UIStroke")
    stroke.Thickness = thickness
    stroke.Color = color
    stroke.Transparency = transparency
    stroke.Parent = parent
    return stroke
end

local function createGradient(parent, colorSequence, rotation)
    local gradient = Instance.new("UIGradient")
    gradient.Color = colorSequence
    gradient.Rotation = rotation or 0
    gradient.Parent = parent
    return gradient
end

local loadingFrame = Instance.new("Frame")
loadingFrame.Size = UDim2.new(0, 120, 0, 120)
loadingFrame.Position = UDim2.new(0.5, -60, 0.5, -60)
loadingFrame.BackgroundTransparency = 1
loadingFrame.Parent = screenGui

local loadingSpinner = Instance.new("ImageLabel")
loadingSpinner.Size = UDim2.new(0.8, 0, 0.8, 0)
loadingSpinner.Position = UDim2.new(0.1, 0, 0.1, 0)
loadingSpinner.Image = "rbxassetid://103930533102756"
loadingSpinner.BackgroundTransparency = 1
loadingSpinner.ImageTransparency = 0.3
loadingSpinner.Parent = loadingFrame

createGradient(loadingSpinner, ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 255, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 0, 255))
})

local welcomeLabel = Instance.new("TextLabel")
welcomeLabel.Size = UDim2.new(0, 250, 0, 40)
welcomeLabel.Position = UDim2.new(0.5, -125, 0.5, 40)
welcomeLabel.Text = "Welcome, " .. player.Name .. "!"
welcomeLabel.TextColor3 = Color3.fromRGB(255, 255, 150)
welcomeLabel.BackgroundTransparency = 1
welcomeLabel.TextSize = 20
welcomeLabel.Font = Enum.Font.GothamBold
welcomeLabel.TextTransparency = 1
welcomeLabel.Parent = loadingFrame

local welcomeStroke = createStroke(welcomeLabel, 2, Color3.fromRGB(0, 200, 255), 1)

local toggleButton = Instance.new("ImageButton")
toggleButton.Size = UDim2.new(0, 50, 0, 50)
toggleButton.Position = UDim2.new(0, 20, 0, 20)
toggleButton.Image = "rbxassetid://103930533102756"
toggleButton.BackgroundTransparency = 0.8
toggleButton.Visible = false
toggleButton.ZIndex = 10
toggleButton.Parent = screenGui

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 10)
toggleCorner.Parent = toggleButton

local toggleStroke = createStroke(toggleButton, 2, Color3.fromRGB(0, 255, 200), 0.5)

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 500, 0, 360)
mainFrame.Position = UDim2.new(0.5, -250, 0.5, -180)
mainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
mainFrame.BackgroundTransparency = 0.2
mainFrame.Visible = false
mainFrame.ClipsDescendants = true
mainFrame.ZIndex = 1
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 10)
mainCorner.Parent = mainFrame

createGradient(mainFrame, ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(50, 0, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 0, 150))
}, -45)

local menuBackground = Instance.new("ImageLabel")
menuBackground.Size = UDim2.new(1, 0, 1, 0)
menuBackground.Image = "rbxassetid://103930533102756"
menuBackground.ImageTransparency = 0.6
menuBackground.BackgroundTransparency = 1
menuBackground.ZIndex = 0
menuBackground.Parent = mainFrame

local titleLabel = Instance.new("TextLabel")
titleLabel.Size = UDim2.new(1, -20, 0, 30)
titleLabel.Position = UDim2.new(0, 10, 0, 10)
titleLabel.Text = "Hutao-hoàngHub"
titleLabel.TextColor3 = Color3.fromRGB(255, 255, 150)
titleLabel.BackgroundTransparency = 1
titleLabel.TextSize = 24
titleLabel.Font = Enum.Font.GothamBlack
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.ZIndex = 2
titleLabel.Parent = mainFrame

createStroke(titleLabel, 2, Color3.fromRGB(0, 200, 255), 0.3)

local subtitleLabel = Instance.new("TextLabel")
subtitleLabel.Size = UDim2.new(1, -20, 0, 20)
subtitleLabel.Position = UDim2.new(0, 10, 0, 40)
subtitleLabel.Text = "Tổng hợp các game"
subtitleLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
subtitleLabel.BackgroundTransparency = 1
subtitleLabel.TextSize = 14
subtitleLabel.Font = Enum.Font.Gotham
subtitleLabel.TextXAlignment = Enum.TextXAlignment.Left
subtitleLabel.ZIndex = 2
subtitleLabel.Parent = mainFrame

local tabFrame = Instance.new("ScrollingFrame")
tabFrame.Size = UDim2.new(0, 157, 0, 250)
tabFrame.Position = UDim2.new(0, 10, 0, 70)
tabFrame.BackgroundTransparency = 1
tabFrame.ZIndex = 2
tabFrame.ScrollBarThickness = 4
tabFrame.ScrollBarImageColor3 = Color3.fromRGB(0, 255, 255)
tabFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
tabFrame.Parent = mainFrame

local tabListLayout = Instance.new("UIListLayout")
tabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
tabListLayout.Padding = UDim.new(0, 5)
tabListLayout.Parent = tabFrame

local function createTab(name, index)
    local contentFrame = Instance.new("ScrollingFrame")
    contentFrame.Size = UDim2.new(1, -177, 1, -120)
    contentFrame.Position = UDim2.new(0, 167, 0, 70)
    contentFrame.BackgroundTransparency = 1
    contentFrame.Visible = (index == 1)
    contentFrame.ZIndex = 2
    contentFrame.ScrollBarThickness = 4
    contentFrame.ScrollBarImageColor3 = Color3.fromRGB(0, 255, 255)
    contentFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    contentFrame.Parent = mainFrame

    local listLayout = Instance.new("UIListLayout")
    listLayout.SortOrder = Enum.SortOrder.LayoutOrder
    listLayout.Padding = UDim.new(0, 10)
    listLayout.Parent = contentFrame
    listLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        contentFrame.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y)
    end)

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, -10, 0, 40)
    button.Text = name
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    button.BackgroundTransparency = 0.4
    button.Font = Enum.Font.GothamBold
    button.TextSize = 14
    button.ZIndex = 10
    button.Parent = tabFrame

    tabFrame.CanvasSize = UDim2.new(0, 0, 0, tabListLayout.AbsoluteContentSize.Y)

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = button

    local stroke = createStroke(button, 1.5, Color3.fromRGB(0, 255, 255), 0.6)

    local tweenInfo = TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut)
    button.MouseEnter:Connect(function()
        TweenService:Create(button, tweenInfo, {Size = UDim2.new(1, -10, 0, 44), BackgroundTransparency = 0.2}):Play()
        TweenService:Create(stroke, tweenInfo, {Transparency = 0.2}):Play()
    end)
    button.MouseLeave:Connect(function()
        TweenService:Create(button, tweenInfo, {Size = UDim2.new(1, -10, 0, 40), BackgroundTransparency = 0.4}):Play()
        TweenService:Create(stroke, tweenInfo, {Transparency = 0.6}):Play()
    end)

    button.MouseButton1Click:Connect(function()
        print("Tab clicked: " .. name)
        for _, content in ipairs(mainFrame:GetChildren()) do
            if content:IsA("ScrollingFrame") and content ~= tabFrame then
                content.Visible = (content == contentFrame)
            end
        end
        button.BackgroundColor3 = Color3.fromRGB(0, 150, 255)
        for _, otherButton in ipairs(tabFrame:GetChildren()) do
            if otherButton:IsA("TextButton") and otherButton ~= button then
                otherButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
            end
        end
    end)

    return contentFrame
end

local function createParagraph(contentFrame, title, content)
    local paragraphFrame = Instance.new("Frame")
    paragraphFrame.Size = UDim2.new(1, -10, 0, 100)
    paragraphFrame.BackgroundTransparency = 1
    paragraphFrame.ZIndex = 2
    paragraphFrame.Parent = contentFrame

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, 0, 0, 20)
    titleLabel.Text = title
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 150)
    titleLabel.BackgroundTransparency = 1
    titleLabel.TextSize = 16
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.ZIndex = 2
    titleLabel.Parent = paragraphFrame

    local contentLabel = Instance.new("TextLabel")
    contentLabel.Size = UDim2.new(1, 0, 0, 70)
    contentLabel.Position = UDim2.new(0, 0, 0, 25)
    contentLabel.Text = content
    contentLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    contentLabel.BackgroundTransparency = 1
    contentLabel.TextSize = 14
    contentLabel.Font = Enum.Font.Gotham
    contentLabel.TextXAlignment = Enum.TextXAlignment.Left
    contentLabel.TextWrapped = true
    contentLabel.ZIndex = 2
    contentLabel.Parent = paragraphFrame
end

local function createButton(contentFrame, title, description, callback)
    local buttonFrame = Instance.new("Frame")
    buttonFrame.Size = UDim2.new(1, -10, 0, 60)
    buttonFrame.BackgroundTransparency = 1
    buttonFrame.ZIndex = 2
    buttonFrame.Parent = contentFrame

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, 40)
    button.Text = title
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    button.BackgroundTransparency = 0.4
    button.Font = Enum.Font.GothamBold
    button.TextSize = 14
    button.ZIndex = 10
    button.Parent = buttonFrame

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = button

    local stroke = createStroke(button, 1.5, Color3.fromRGB(0, 255, 255), 0.6)

    local descLabel = Instance.new("TextLabel")
    descLabel.Size = UDim2.new(1, 0, 0, 20)
    descLabel.Position = UDim2.new(0, 0, 0, 40)
    descLabel.Text = description
    descLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    descLabel.BackgroundTransparency = 1
    descLabel.TextSize = 12
    descLabel.Font = Enum.Font.Gotham
    descLabel.TextXAlignment = Enum.TextXAlignment.Left
    descLabel.ZIndex = 2
    descLabel.Parent = buttonFrame

    local tweenInfo = TweenInfo.new(0.15, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut)
    button.MouseEnter:Connect(function()
        TweenService:Create(button, tweenInfo, {Size = UDim2.new(1, 0, 0, 44), BackgroundTransparency = 0.2}):Play()
        TweenService:Create(stroke, tweenInfo, {Transparency = 0.2}):Play()
    end)
    button.MouseLeave:Connect(function()
        TweenService:Create(button, tweenInfo, {Size = UDim2.new(1, 0, 0, 40), BackgroundTransparency = 0.4}):Play()
        TweenService:Create(stroke, tweenInfo, {Transparency = 0.6}):Play()
    end)

    button.MouseButton1Click:Connect(function()
        print("Button clicked: " .. title)
        local success, err = pcall(callback)
        if not success then
            warn("Error in " .. title .. ": " .. tostring(err))
        end
    end)
end

local tab1Content = createTab("Info ❗", 1)
local tab2Content = createTab("script GAG ✅", 2)
local tab3Content = createTab("Script Blox Fruits ✅", 3)

createParagraph(tab1Content, "Thông tin về Game Hub", "Chào mừng bạn đến với Game Hub! Đây là nơi cung cấp các tính năng và công cụ cho game Roblox của bạn. Sử dụng các tab để khám phá các tùy chọn có sẵn.")
createParagraph(tab1Content, "Báo cáo lỗi và cập nhật", "Các tính năng sẽ được cập nhật thường xuyên. Bạn có thể báo cáo lỗi hoặc yêu cầu cập nhật bằng cách liên hệ với chúng tôi.")
createButton(tab1Content, "Liên hệ TikTok", "Liên hệ để báo cáo lỗi hoặc đề xuất tính năng", function()
    setclipboard("https://www.tiktok.com/@hoang_lq911?_t=ZS-8zUlnOS7bXj&_r=1")
    print("TikTok link copied to clipboard!")
end)

createButton(tab2Content, "Speed Hub", "Cần key", function()
    print("Loading Speed Hub...")
    repeat wait() until game:IsLoaded()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AhmadV99/Speed-Hub-X/main/Speed%20Hub%20X.lua", true))()
end)
createButton(tab2Content, "No Lag Hub", "Cần key", function()
    print("Loading No Lag Hub...")
    repeat wait() until game:IsLoaded() and game.Players.LocalPlayer
    local scripts = {
        [126884695634066] = "https://raw.githubusercontent.com/NoLag-id/No-Lag-HUB/refs/heads/main/Garden/Garden-V1.lua",
        [81440632616906] = "https://raw.githubusercontent.com/NoLag-id/No-Lag-HUB/refs/heads/main/DigEarth/V1.lua",
    }
    local url = scripts[game.PlaceId]
    if url then
        loadstring(game:HttpGetAsync(url))()
        loadstring(game:HttpGetAsync("https://raw.githubusercontent.com/NoLag-id/No-Lag-HUB/refs/heads/main/untitled.lua"))()
    else
        warn("No Lag Hub: No script found for this game!")
    end
end)
createButton(tab2Content, "Nat Hub", "Cần key", function()
    print("Loading Nat Hub...")
    repeat wait() until game:IsLoaded()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/ArdyBotzz/NatHub/refs/heads/master/NatHub.lua"))()
end)
createButton(tab2Content, "ThunderZ Hub", "Cần key", function()
    print("Loading ThunderZ Hub...")
    repeat wait() until game:IsLoaded()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/ThundarZ/Welcome/refs/heads/main/Main/GaG/Main.lua"))()
end)
createButton(tab2Content, "Quantum Hub", "Có thể không dùng được nữa", function()
    print("Loading Quantum Hub...")
    repeat wait() until game:IsLoaded()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/flazhy/QuantumOnyx/refs/heads/main/QuantumOnyx.lua"))()
end)

createButton(tab3Content, "Tuan Anh IOS", "Không cần key", function()
    print("Loading Tuan Anh IOS...")
    repeat wait() until game:IsLoaded()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/AnhTuanDzai-Hub/TuanAnhIOS/refs/heads/main/TuanAnhIOS-Main.Lua"))()
end)
createButton(tab3Content, "BlueX Hub", "Không cần key (có thể chưa update)", function()
    print("Loading BlueX Hub...")
    repeat wait() until game:IsLoaded()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Dev-BlueX/BlueX-Hub/refs/heads/main/Main.lua"))()
end)
createButton(tab3Content, "AK", "Không cần key (có thể chưa update)", function()
    print("Loading AK...")
    repeat wait() until game:IsLoaded()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/hehej97/Ak/refs/heads/main/Akfixbug.txt"))()
end)
createButton(tab3Content, "REDZ Hub", "Không cần key", function()
    print("Loading REDZ Hub...")
    repeat wait() until game:IsLoaded()
    local Settings = {
        JoinTeam = "Pirates",
        Translator = true
    }
    loadstring(game:HttpGet("https://raw.githubusercontent.com/tlredz/Scripts/refs/heads/main/main.luau"))(Settings)
end)

local function makeDraggable(frame)
    local dragging, dragInput, dragStart, startPos
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            local connection
            connection = input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                    connection:Disconnect()
                end
            end)
        end
    end)
    local dragConnection
    dragConnection = UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            dragInput = input
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    frame.AncestryChanged:Connect(function()
        if not frame:IsDescendantOf(game) then
            dragConnection:Disconnect()
        end
    end)
end

makeDraggable(mainFrame)
makeDraggable(toggleButton)

local tweenInfo = TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut)
toggleButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = not mainFrame.Visible
    TweenService:Create(mainFrame, tweenInfo, {BackgroundTransparency = mainFrame.Visible and 0.2 or 1, Size = mainFrame.Visible and UDim2.new(0, 500, 0, 360) or UDim2.new(0, 450, 0, 320)}):Play()
end)

toggleButton.MouseEnter:Connect(function()
    TweenService:Create(toggleButton, tweenInfo, {ImageTransparency = 0.2}):Play()
    TweenService:Create(toggleStroke, tweenInfo, {Transparency = 0.2}):Play()
end)
toggleButton.MouseLeave:Connect(function()
    TweenService:Create(toggleButton, tweenInfo, {ImageTransparency = 0}):Play()
    TweenService:Create(toggleStroke, tweenInfo, {Transparency = 0.5}):Play()
end)

local function runWelcomeAnimation()
    if not playerGui then
        warn("Error: PlayerGui not found!")
        return
    end

    local spinnerTween = TweenService:Create(loadingSpinner, TweenInfo.new(1.2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1), {Rotation = 360})
    spinnerTween:Play()

    local welcomeTweenInfo = TweenInfo.new(1.2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
    local welcomeTween = TweenService:Create(welcomeLabel, welcomeTweenInfo, {TextTransparency = 0, Size = UDim2.new(0, 270, 0, 48)})
    local welcomeStrokeTween = TweenService:Create(welcomeStroke, welcomeTweenInfo, {Transparency = 0})
    welcomeTween:Play()
    welcomeStrokeTween:Play()

    task.wait(2)
    local fadeOutTweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut)
    local fadeOut = TweenService:Create(loadingFrame, fadeOutTweenInfo, {BackgroundTransparency = 1})
    local spinnerFade = TweenService:Create(loadingSpinner, fadeOutTweenInfo, {ImageTransparency = 1})
    local welcomeFade = TweenService:Create(welcomeLabel, fadeOutTweenInfo, {TextTransparency = 1})
    local welcomeStrokeFade = TweenService:Create(welcomeStroke, fadeOutTweenInfo, {Transparency = 1})
    fadeOut:Play()
    spinnerFade:Play()
    welcomeFade:Play()
    welcomeStrokeFade:Play()
    fadeOut.Completed:Connect(function()
        spinnerTween:Cancel()
        loadingFrame:Destroy()
        toggleButton.Visible = true
    end)
end

if playerGui then
    local ancestryConnection
    ancestryConnection = screenGui.AncestryChanged:Connect(function()
        if not screenGui:IsDescendantOf(game) then
            ancestryConnection:Disconnect()
        end
    end)
    task.spawn(runWelcomeAnimation)
else
    warn("Error: PlayerGui not found!")
end
